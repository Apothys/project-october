!!! 5
%html
  %head
    %title Project October
    %meta{ :name => 'viewport', :content => 'width=device-width, initial-scale=1.0' }
    = stylesheet_link_tag    "application", :media => "all"
    = yield :stylesheets
    / Intentionally block page load to get the fonts
    = javascript_include_tag '//use.typekit.net/vxb6zze.js'
    :javascript
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-39936366-1', 'case.edu');
      ga('send', 'pageview');

      try{Typekit.load();}catch(e){}
    = csrf_meta_tags
  %body
    - if THRIFTCLIENT.read_only_mode?
      .read-only-mode
        %p We're experiencing some troubles at the moment. October is temporarily in read-only mode.
    .container#logobar
      .row
        .span4
          %h1.logo= link_to 'October', root_path
        .span8
          .right-nav-items
            - if signed_in?
              = link_to 'Logout', destroy_user_session_path, :class => 'btn', :method => 'delete', :style => 'float: right'
              = link_to current_user.name, user_path(current_user.name), :class => 'btn', :style => 'float: right'
            - else
              = link_to 'Login', new_user_session_path, :class => 'btn', :style => 'float: right'
            - if signed_in?
              = link_to 'Post an Article', new_post_path, :class => 'btn', :style => 'float: right'
            = form_for('search', :url => search_posts_path, :html => { :style => 'float: right;'}) do |f|
              =f.text_field :query, :placeholder => "Search for user, keyword, or feed", :class => 'span4'
      - if flash[:notice] || flash[:error]
        #alert-bar
          - if flash[:notice]
            .alert.alert-info= flash[:notice]
          - if flash[:error]
            .alert.alert-error= flash[:error]
      - if @query.present?
        .row
          .span12
            %h2 Showing results for "#{@query}":
        - if @user_results.present?
          .row
            .span12
              %h3 Users
              %ol.user-results
                - @user_results.each do |u|
                  %li.box
                    %h3
                      #{image_tag gravatar_url(u, 32)}
                      = link_to u.name, user_path(u.name)
    .container#articles
      = yield
    = javascript_include_tag "application"
    = yield :javascripts
